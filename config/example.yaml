# Claude Request Forwarder Configuration
# å®Œæ•´é…ç½®ç¤ºä¾‹ï¼Œå±•ç¤ºæ‰€æœ‰å¯ç”¨çš„é…ç½®é€‰é¡¹

# å…¨å±€æ—¶åŒºé…ç½® - å½±å“æ‰€æœ‰æ—¶é—´ç›¸å…³åŠŸèƒ½
timezone: "Asia/Shanghai"      # å…¨å±€æ—¶åŒºè®¾ç½®ï¼Œé»˜è®¤: Asia/Shanghai
                               # å…¶ä»–æœ‰æ•ˆå€¼: "UTC", "America/New_York", "Europe/London" ç­‰

# æœåŠ¡å™¨é…ç½®
server:
  host: "0.0.0.0"      # Dockerç¯å¢ƒä¸­ç›‘å¬æ‰€æœ‰æ¥å£ï¼Œé»˜è®¤: localhost
  port: 8087             # ç›‘å¬ç«¯å£ï¼Œé»˜è®¤: 8080

# è·¯ç”±ç­–ç•¥é…ç½®(é€‚ç”¨äºç»„å†…)
strategy:
  type: "fastest"                  # è·¯ç”±ç­–ç•¥: "priority" (ä¼˜å…ˆçº§) æˆ– "fastest" (æœ€å¿«å“åº”)
  fast_test_enabled: true          # å¯ç”¨å¿«é€Ÿæµ‹è¯• (ä»…åœ¨ fastest ç­–ç•¥ä¸‹ç”Ÿæ•ˆ)
  fast_test_cache_ttl: "30s"       # å¿«é€Ÿæµ‹è¯•ç»“æœç¼“å­˜æ—¶é—´ï¼Œé»˜è®¤: 3s
  fast_test_timeout: "5s"          # å¿«é€Ÿæµ‹è¯•è¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤: 1s  
  fast_test_path: "/v1/models"     # å¿«é€Ÿæµ‹è¯•è·¯å¾„ï¼Œé»˜è®¤ä½¿ç”¨å¥åº·æ£€æŸ¥è·¯å¾„

# é‡è¯•é…ç½®
retry:
  max_attempts: 3        # æœ€å¤§é‡è¯•æ¬¡æ•°ï¼Œé»˜è®¤: 3
  base_delay: "1s"       # åŸºç¡€å»¶è¿Ÿæ—¶é—´ï¼Œé»˜è®¤: 1s
  max_delay: "30s"       # æœ€å¤§å»¶è¿Ÿæ—¶é—´ï¼Œé»˜è®¤: 30s
  multiplier: 2.0        # å»¶è¿Ÿå€æ•°ï¼Œé»˜è®¤: 2.0

# å¥åº·æ£€æŸ¥é…ç½®
health:
  check_interval: "30s"  # å¥åº·æ£€æŸ¥é—´éš”ï¼Œé»˜è®¤: 30s
  timeout: "5s"          # å¥åº·æ£€æŸ¥è¶…æ—¶ï¼Œé»˜è®¤: 5s
  health_path: "/v1/models"  # å¥åº·æ£€æŸ¥è·¯å¾„ï¼Œé»˜è®¤: /v1/models

# æ—¥å¿—é…ç½®
logging:
  level: "info"          # æ—¥å¿—çº§åˆ«: debug, info, warn, errorï¼Œé»˜è®¤: info
  format: "json"         # æ—¥å¿—æ ¼å¼: "json" æˆ– "text"ï¼Œé»˜è®¤: text

  # æ–‡ä»¶æ—¥å¿—é…ç½® (å¯é€‰)
  file_enabled: false            # æ˜¯å¦å¯ç”¨æ–‡ä»¶æ—¥å¿—ï¼Œé»˜è®¤: false
  file_path: "logs/app.log"      # æ—¥å¿—æ–‡ä»¶è·¯å¾„ï¼Œé»˜è®¤: logs/app.log
  max_file_size: "100MB"         # å•ä¸ªæ—¥å¿—æ–‡ä»¶æœ€å¤§å¤§å°ï¼Œæ”¯æŒ: KB, MB, GBï¼Œé»˜è®¤: 100MB
  max_files: 10                  # æœ€å¤šä¿ç•™çš„è½®è½¬æ–‡ä»¶æ•°é‡ï¼Œé»˜è®¤: 10
  compress_rotated: true         # æ˜¯å¦å‹ç¼©è½®è½¬çš„æ—§æ—¥å¿—æ–‡ä»¶ï¼Œé»˜è®¤: false
  disable_response_limit: true   # å¯ç”¨æ–‡ä»¶æ—¥å¿—æ—¶æ˜¯å¦å–æ¶ˆå“åº”å†…å®¹è¾“å‡ºé™åˆ¶ï¼Œé»˜è®¤: false

  # Tokenè°ƒè¯•é…ç½® - ç”¨äºè°ƒè¯•Tokenè§£æå¤±è´¥é—®é¢˜
  token_debug:
    enabled: false                 # æ˜¯å¦å¯ç”¨Tokenè°ƒè¯•åŠŸèƒ½ï¼Œé»˜è®¤: false (ç”Ÿäº§ç¯å¢ƒå»ºè®®å…³é—­)
    save_path: "logs"             # è°ƒè¯•æ–‡ä»¶ä¿å­˜ç›®å½•ï¼Œé»˜è®¤: logs
    max_files: 50                 # æœ€å¤§ä¿ç•™è°ƒè¯•æ–‡ä»¶æ•°é‡ï¼Œé»˜è®¤: 50 (0=ä¸é™åˆ¶)
    auto_cleanup_days: 7          # è‡ªåŠ¨æ¸…ç†Nå¤©å‰çš„è°ƒè¯•æ–‡ä»¶ï¼Œé»˜è®¤: 7 (0=ä¸æ¸…ç†)

# æµå¼ä¼ è¾“é…ç½®
streaming:
  heartbeat_interval: "30s"        # å¿ƒè·³é—´éš”ï¼Œé»˜è®¤: 30s
  read_timeout: "10s"              # è¯»å–è¶…æ—¶ï¼Œé»˜è®¤: 10s
  max_idle_time: "120s"            # æœ€å¤§ç©ºé—²æ—¶é—´ï¼Œé»˜è®¤: 120s

  # å“åº”å¤´è¶…æ—¶é…ç½® (v3.5.1æ–°å¢)
  # æ§åˆ¶ç­‰å¾…æœåŠ¡ç«¯é¦–æ¬¡å“åº”å¤´çš„æœ€å¤§æ—¶é—´
  # å¯¹äºAIæœåŠ¡(å¦‚Claude API)å»ºè®®è®¾ç½®è¾ƒé•¿æ—¶é—´ï¼Œä»¥åº”å¯¹æ’é˜Ÿå’Œé¢„å¤„ç†
  # è®¾ç½®è¿‡çŸ­å¯èƒ½å¯¼è‡´å‡è¶…æ—¶å’Œä¸å¿…è¦çš„é‡è¯•
  # æ¨èèŒƒå›´: 30s-120sï¼Œæ ¹æ®å®é™…æœåŠ¡å“åº”æ—¶é—´è°ƒæ•´
  response_header_timeout: "60s"   # å“åº”å¤´è¶…æ—¶ï¼Œé»˜è®¤: 60s

# ç»„ç®¡ç†é…ç½®
group:
  cooldown: "600s"                      # ç»„å¤±è´¥åçš„å†·å´æ—¶é—´ï¼Œé»˜è®¤: 600s
  auto_switch_between_groups: true      # ç»„é—´è‡ªåŠ¨åˆ‡æ¢ï¼štrue=è‡ªåŠ¨åˆ‡æ¢åˆ°å…¶ä»–ç»„ï¼Œfalse=éœ€è¦æ‰‹åŠ¨åˆ‡æ¢ï¼Œé»˜è®¤: true

# è¯·æ±‚æŒ‚èµ·é…ç½®
request_suspend:
  enabled: false              # æ˜¯å¦å¯ç”¨è¯·æ±‚æŒ‚èµ·åŠŸèƒ½ï¼Œé»˜è®¤: false
  timeout: "300s"             # æŒ‚èµ·è¯·æ±‚çš„è¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤: 300s (5åˆ†é’Ÿ)
  max_suspended_requests: 100 # æœ€å¤§æŒ‚èµ·è¯·æ±‚æ•°é‡ï¼Œé»˜è®¤: 100

# å…¨å±€è¶…æ—¶é…ç½®
global_timeout: "300s"       # éæµå¼è¯·æ±‚çš„å…¨å±€é»˜è®¤è¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤: 300s (5åˆ†é’Ÿ)

# é‰´æƒé…ç½® (å¯é€‰)
auth:
  enabled: false             # æ˜¯å¦å¯ç”¨é‰´æƒï¼Œé»˜è®¤: false (ä¸é‰´æƒ)
  # token: "your-bearer-token"  # Bearer Tokenï¼Œå¯ç”¨é‰´æƒæ—¶å¿…é¡»è®¾ç½®

# TUIç•Œé¢é…ç½®,å¦‚æœéƒ¨ç½²åœ¨æœåŠ¡å™¨ä¸Šå»ºè®®è®¾ç½®ä¸º false
tui:
  enabled: false               # Dockerç¯å¢ƒä¸­ç¦ç”¨TUIç•Œé¢ï¼Œé»˜è®¤: true
  update_interval: "1s"       # TUIåˆ·æ–°é—´éš”ï¼Œé»˜è®¤: 1s
  save_priority_edits: false  # æ˜¯å¦åœ¨TUIä¸­ä¿å­˜ä¼˜å…ˆçº§ç¼–è¾‘åˆ°é…ç½®æ–‡ä»¶ï¼Œé»˜è®¤: falseï¼ˆå½“å‰æƒ…å†µä¸‹ä¿å­˜é…ç½®æ–‡ä»¶å¯èƒ½ä¼šè‡ªåŠ¨æ ¼å¼åŒ–é…ç½®æ–‡ä»¶ï¼‰

# Webç•Œé¢é…ç½®
web:
  enabled: true              # Dockerç¯å¢ƒä¸­å¯ç”¨Webç•Œé¢ï¼Œé»˜è®¤: false
  host: "0.0.0.0"          # Webç•Œé¢ç›‘å¬æ‰€æœ‰æ¥å£ï¼Œé»˜è®¤: localhost
  port: 8088                 # Webç•Œé¢ç«¯å£ï¼Œé»˜è®¤: 8088

# Tokenè®¡æ•°é…ç½®
token_counting:
  enabled: true              # æ˜¯å¦å¯ç”¨count_tokensç«¯ç‚¹æ”¯æŒï¼Œé»˜è®¤: false
  estimation_ratio: 4.0      # Tokenä¼°ç®—æ¯”ä¾‹ (1 token â‰ˆ 4 å­—ç¬¦)ï¼Œé»˜è®¤: 4.0

# ä½¿ç”¨è·Ÿè¸ªé…ç½®
# =================================================================
# ğŸ“Š ä½¿ç”¨æƒ…å†µè¿½è¸ªç³»ç»Ÿ (Usage Tracking)
# =================================================================
# ğŸªŸ Windowså…¼å®¹æ€§ä¿è¯: v1.0.2+ å®Œç¾æ”¯æŒWindowså¹³å°
# ğŸ¯ æ•°æ®åº“æ”¯æŒ: SQLite (é»˜è®¤) å’Œ MySQL (v3.4.2+)
# =================================================================
usage_tracking:
  enabled: false                         # æ˜¯å¦å¯ç”¨ä½¿ç”¨è·Ÿè¸ªï¼Œé»˜è®¤: false

  # =================================================================
  # ğŸ—„ï¸  æ•°æ®åº“é…ç½®
  # =================================================================
  # ğŸ’¡ æ—¶åŒºé…ç½®çº§è”: database.timezone > å…¨å±€timezone > Asia/Shanghai (é»˜è®¤)
  database:
    # =================================================================
    # ğŸ“ SQLiteé…ç½® (é»˜è®¤æ¨èï¼Œå¼€ç®±å³ç”¨)
    # =================================================================
    type: "sqlite"                        # æ•°æ®åº“ç±»å‹: "sqlite" | "mysql"
    path: "data/usage.db"                 # SQLiteæ•°æ®åº“æ–‡ä»¶è·¯å¾„

    # ğŸ’¡ SQLiteè¯´æ˜:
    # - ä½¿ç”¨çº¯Go SQLiteé©±åŠ¨ (modernc.org/sqlite)ï¼Œæ— CGOä¾èµ–
    # - è‡ªåŠ¨åˆ›å»ºæ•°æ®åº“æ–‡ä»¶å’Œè¡¨ç»“æ„ (é¦–æ¬¡è¿è¡Œæ—¶)
    # - æ•°æ®åº“æ–‡ä»¶å¯ä»¥ç›´æ¥å¤åˆ¶ç”¨äºå¤‡ä»½å’Œè¿ç§»
    # - æ”¯æŒWALæ¨¡å¼ï¼Œæä¾›æ›´å¥½çš„å¹¶å‘æ€§èƒ½
    # - é€‚åˆå•æœºéƒ¨ç½²å’Œè½»é‡çº§ä½¿ç”¨
    # - æ”¯æŒæ‰€æœ‰å¹³å°ï¼šWindowsã€Linuxã€macOS (Intel & Apple Silicon)

    # =================================================================
    # ğŸ—„ï¸  MySQLé…ç½® (ç”Ÿäº§ç¯å¢ƒæ¨è)
    # =================================================================
    # å¦‚æœéœ€è¦ä½¿ç”¨MySQLï¼Œè¯·ä¿®æ”¹ä¸Šé¢çš„é…ç½®ä¸ºï¼š
    # type: "mysql"
    # host: "127.0.0.1"                   # MySQLæœåŠ¡å™¨åœ°å€
    # port: 3306                          # MySQLç«¯å£ï¼Œé»˜è®¤: 3306
    # database: "cc_forwarder"            # æ•°æ®åº“åç§°
    # username: "cc_user"                 # æ•°æ®åº“ç”¨æˆ·å
    # password: "cc_pass"                 # æ•°æ®åº“å¯†ç 
    # charset: "utf8mb4"                  # å­—ç¬¦é›†ï¼Œé»˜è®¤: utf8mb4 (æ”¯æŒemojiå’Œä¸­æ–‡)
    # timezone: "Asia/Shanghai"           # æ•°æ®åº“æ—¶åŒºè®¾ç½®ï¼Œç•™ç©ºåˆ™ç»§æ‰¿å…¨å±€æ—¶åŒºé…ç½®
    #
    # # MySQLè¿æ¥æ± é…ç½® (å¯é€‰)
    # max_open_conns: 10                  # æœ€å¤§æ‰“å¼€è¿æ¥æ•°ï¼Œé»˜è®¤: 10
    # max_idle_conns: 5                   # æœ€å¤§ç©ºé—²è¿æ¥æ•°ï¼Œé»˜è®¤: 5
    # conn_max_lifetime: "1h"             # è¿æ¥æœ€å¤§ç”Ÿå­˜æ—¶é—´ï¼Œé»˜è®¤: 1h
    # conn_max_idle_time: "10m"           # è¿æ¥æœ€å¤§ç©ºé—²æ—¶é—´ï¼Œé»˜è®¤: 10m

    # ğŸ’¡ MySQLä¼˜åŠ¿:
    # - é«˜æ€§èƒ½å’Œé«˜å¹¶å‘å¤„ç†èƒ½åŠ›
    # - å®Œå–„çš„å¤‡ä»½å’Œæ¢å¤æœºåˆ¶
    # - æ”¯æŒä¸»ä»å¤åˆ¶å’Œé›†ç¾¤éƒ¨ç½²
    # - DBAå‹å¥½ï¼šæ ‡å‡†SQLæŸ¥è¯¢ï¼Œä¸“ä¸šå·¥å…·æ”¯æŒ
    # - ç”Ÿäº§çº§æ•°æ®æŒä¹…åŒ–å’Œä¸€è‡´æ€§ä¿éšœ
    # - æ”¯æŒMySQL 5.7+ å’Œ 8.0+ï¼Œå…¼å®¹MariaDB 10.3+
    # - è‡ªåŠ¨æ—¶åŒºåŒæ­¥ï¼Œç¡®ä¿æ—¶é—´ä¸€è‡´æ€§

    # ğŸš€ å¿«é€Ÿå¼€å§‹MySQL:
    # 1. å¯åŠ¨MySQLæœåŠ¡: docker-compose -f docker-compose.mysql.yml up -d
    # 2. å¤åˆ¶é…ç½®æ¨¡æ¿: cp config/mysql_example.yaml config/config.yaml
    # 3. å¯åŠ¨åº”ç”¨: ./cc-forwarder -config config/config.yaml

  # =================================================================
  
  # å¼‚æ­¥å†™å…¥é…ç½® - æœ¬åœ°ä½¿ç”¨ä¼˜åŒ–
  buffer_size: 300                      # äº‹ä»¶ç¼“å†²åŒºå¤§å°ï¼Œé»˜è®¤: 1000 (æœ¬åœ°ä½¿ç”¨å‡å°)
  batch_size: 15                        # æ‰¹é‡å†™å…¥å¤§å°ï¼Œé»˜è®¤: 100 (æœ¬åœ°ä½¿ç”¨å‡å°ï¼Œå¿«é€ŸæŒä¹…åŒ–)
  flush_interval: "8s"                  # å¼ºåˆ¶åˆ·æ–°é—´éš”ï¼Œé»˜è®¤: 30s (æœ¬åœ°ä½¿ç”¨åŠ å¿«åˆ·æ–°)
  max_retry: 3                           # å†™å…¥å¤±è´¥æœ€å¤§é‡è¯•æ¬¡æ•°ï¼Œé»˜è®¤: 3
  
  # ğŸ“ˆ æ€§èƒ½ç‰¹ç‚¹:
  # - å®Œå…¨å¼‚æ­¥å¤„ç†ï¼Œä¸å½±å“è¯·æ±‚è½¬å‘æ€§èƒ½
  # - æ‰¹é‡å†™å…¥ï¼Œå‡å°‘æ•°æ®åº“I/Oå¼€é”€
  # - è‡ªåŠ¨æ•…éšœæ¢å¤ï¼Œæ•°æ®å®Œæ•´æ€§ä¿éšœ
  # - å†…å­˜ç¼“å†²ï¼Œå¹³æ»‘å¤„ç†çªå‘è¯·æ±‚
  
  # æ•°æ®ä¿ç•™ç­–ç•¥
  retention_days: 0                     # æ•°æ®ä¿ç•™å¤©æ•° (0=æ°¸ä¹…ä¿ç•™)ï¼Œé»˜è®¤: 90
  cleanup_interval: "24h"                # æ¸…ç†ä»»åŠ¡æ‰§è¡Œé—´éš”ï¼Œé»˜è®¤: 24h
  
  # ğŸ“Š æ•°æ®ç»Ÿè®¡åŠŸèƒ½:
  # - Tokenä½¿ç”¨é‡ç»Ÿè®¡ (è¾“å…¥/è¾“å‡º/ç¼“å­˜åˆ›å»º/ç¼“å­˜è¯»å–)
  # - æˆæœ¬åˆ†æ (åŸºäºæ¨¡å‹å®šä»·è‡ªåŠ¨è®¡ç®—)
  # - ç«¯ç‚¹æ€§èƒ½ç›‘æ§ (å“åº”æ—¶é—´ã€æˆåŠŸç‡)
  # - è¯·æ±‚ç”Ÿå‘½å‘¨æœŸè¿½è¸ª (å®Œæ•´çš„è¯·æ±‚æµç¨‹è®°å½•)
  # - Webç•Œé¢å®æ—¶æŸ¥çœ‹ï¼Œæ”¯æŒCSV/JSONå¯¼å‡º
  
  # æ¨¡å‹å®šä»·é…ç½® (USD per 1M tokens) - 2025å¹´æœ€æ–°å®˜æ–¹å®šä»·
  model_pricing:
    "claude-sonnet-4-20250514":
      input: 3.00
      output: 15.00
      cache_creation: 3.75      # 1.25x input (5åˆ†é’Ÿç¼“å­˜)
      cache_read: 0.30          # 0.1x input (ç¼“å­˜è¯»å–)
    "claude-3-5-haiku-20241022":
      input: 0.80
      output: 4.00
      cache_creation: 1.00      # 1.25x input
      cache_read: 0.08          # 0.1x input
    "claude-3-5-sonnet-20241022":  
      input: 3.00
      output: 15.00
      cache_creation: 3.75      # 1.25x input
      cache_read: 0.30          # 0.1x input
    "claude-opus-4":
      input: 15.00
      output: 75.00
      cache_creation: 18.75     # 1.25x input
      cache_read: 1.50          # 0.1x input
    "claude-opus-4.1":
      input: 15.00
      output: 75.00
      cache_creation: 18.75     # 1.25x input
      cache_read: 1.50          # 0.1x input
    # å…¼å®¹æ—§ç‰ˆæœ¬æ¨¡å‹
    "claude-3-haiku-20240307":
      input: 0.25
      output: 1.25
      cache_creation: 0.31      # 1.25x input
      cache_read: 0.025         # 0.1x input
    "claude-3-sonnet-20240229":  
      input: 3.00
      output: 15.00
      cache_creation: 3.75      # 1.25x input
      cache_read: 0.30          # 0.1x input
    "claude-3-opus-20240229":
      input: 15.00
      output: 75.00
      cache_creation: 18.75     # 1.25x input
      cache_read: 1.50          # 0.1x input
    
  # é»˜è®¤å®šä»· (å½“æ¨¡å‹ä¸åœ¨é…ç½®ä¸­æ—¶ä½¿ç”¨)
  default_pricing:
    input: 3.00
    output: 15.00
    cache_creation: 3.75      # 1.25x input
    cache_read: 0.30          # 0.1x input

# ä»£ç†é…ç½® (å¯é€‰)
proxy:
  enabled: false              # æ˜¯å¦å¯ç”¨ä»£ç†
  type: "http"               # ä»£ç†ç±»å‹: "http", "https", æˆ– "socks5"
  
  # æ–¹å¼ä¸€: å®Œæ•´ä»£ç† URL
  # url: "http://proxy.example.com:8080"
  # url: "https://proxy.example.com:8080"
  # url: "socks5://proxy.example.com:1080"
  
  # æ–¹å¼äºŒ: åˆ†åˆ«æŒ‡å®šä¸»æœºå’Œç«¯ç‚¹
  host: "proxy.example.com"   # ä»£ç†ä¸»æœº
  port: 8080                  # ä»£ç†ç«¯å£
  
  # å¯é€‰çš„è®¤è¯ä¿¡æ¯
  # username: "proxy_user"    # ä»£ç†ç”¨æˆ·å
  # password: "proxy_pass"    # ä»£ç†å¯†ç 

# ç«¯ç‚¹é…ç½®
# ==================== ç»„å¯†é’¥é…ç½®è¯´æ˜ ====================
# æ¯ä¸ªç»„çš„ç¬¬ä¸€ä¸ªç«¯ç‚¹åº”è¯¥å®šä¹‰è¯¥ç»„ä½¿ç”¨çš„ token å’Œ api-key
# ç»„å†…å…¶ä»–ç«¯ç‚¹å¦‚æœæ²¡æœ‰å®šä¹‰ token/api-keyï¼Œä¼šè‡ªåŠ¨ä½¿ç”¨ç»„å†…ç¬¬ä¸€ä¸ªç«¯ç‚¹çš„å¯†é’¥
# å¦‚æœæŸä¸ªç«¯ç‚¹éœ€è¦ä½¿ç”¨ä¸åŒçš„å¯†é’¥ï¼Œå¯ä»¥æ˜¾å¼æŒ‡å®š token/api-key æ¥è¦†ç›–ç»„é»˜è®¤å€¼
# ========================================================

endpoints:
  # ============ ä¸»è¦ç»„ (main) ============
  # ç»„å®šä¹‰ç«¯ç‚¹ - å®šä¹‰æ•´ä¸ª main ç»„ä½¿ç”¨çš„å¯†é’¥
  - name: "primary"
    url: "https://api.openai.com"
    group: "main"                          # ç»„å
    group-priority: 1                      # ç»„ä¼˜å…ˆçº§ (æ•°å­—è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜)
    priority: 1                            # ç»„å†…ä¼˜å…ˆçº§ (æ•°å­—è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜)
    timeout: "300s"
    token: "sk-your-openai-api-key"        # ğŸ”‘ æ­¤å¯†é’¥ä¼šè¢«åŒç»„å…¶ä»–ç«¯ç‚¹å…±äº«
    api-key: "your-api-key-value"          # ğŸ”‘ æ­¤APIå¯†é’¥ä¼šè¢«åŒç»„å…¶ä»–ç«¯ç‚¹å…±äº«
    supports_count_tokens: true            # âœ… æ­¤ç«¯ç‚¹æ”¯æŒcount_tokens (å¦‚Anthropicå®˜æ–¹API)
    headers:
      User-Agent: "Claude-Request-Forwarder/1.0"
      X-Custom-Header: "custom-value"

  # ä¸»è¦ç»„å¤‡ç”¨ç«¯ç‚¹ - è‡ªåŠ¨ä½¿ç”¨ main ç»„çš„å¯†é’¥
  - name: "primary_backup"
    url: "https://api.anthropic.com"
    priority: 2                            # ç»„å†…ä¼˜å…ˆçº§ 2
    timeout: "300s"
    supports_count_tokens: false           # âŒ æ­¤ç«¯ç‚¹ä¸æ”¯æŒcount_tokens (å¦‚æŸäº›ä»£ç†)
    # ğŸ”„ è‡ªåŠ¨ç»§æ‰¿: group: "main", group-priority: 1
    # ğŸ”‘ è‡ªåŠ¨ä½¿ç”¨ main ç»„çš„å¯†é’¥: token å’Œ api-key ä¼šåŠ¨æ€è§£æä¸º primary ç«¯ç‚¹çš„å€¼
    # ğŸ“‹ headers ç»§æ‰¿è‡ª primary ç«¯ç‚¹

  # ============ å¤‡ç”¨ç»„ (backup) ============
  # ç»„å®šä¹‰ç«¯ç‚¹ - å®šä¹‰æ•´ä¸ª backup ç»„ä½¿ç”¨çš„å¯†é’¥
  - name: "backup1"
    url: "https://api.example.com"
    group: "backup"                        # æ–°çš„ç»„å
    group-priority: 2                      # å¤‡ç”¨ç»„ä¼˜å…ˆçº§
    priority: 1                            # ç»„å†…ä¼˜å…ˆçº§
    timeout: "300s"
    token: "sk-backup-group-api-key"       # ğŸ”‘ æ­¤å¯†é’¥ä¼šè¢«åŒç»„å…¶ä»–ç«¯ç‚¹å…±äº«
    api-key: "backup-group-api-key"        # ğŸ”‘ æ­¤APIå¯†é’¥ä¼šè¢«åŒç»„å…¶ä»–ç«¯ç‚¹å…±äº«
    headers:
      Authorization: "Bearer custom-token"
      X-API-Version: "2024-01"

  # å¤‡ç”¨ç»„çš„ç¬¬äºŒä¸ªç«¯ç‚¹ - è‡ªåŠ¨ä½¿ç”¨ backup ç»„çš„å¯†é’¥
  - name: "backup2"
    url: "https://api.backup2.com"
    priority: 2                            # ç»„å†…ä¼˜å…ˆçº§ 2
    timeout: "300s"
    # ğŸ”„ è‡ªåŠ¨ç»§æ‰¿: group: "backup", group-priority: 2
    # ğŸ”‘ è‡ªåŠ¨ä½¿ç”¨ backup ç»„çš„å¯†é’¥: ä¼šåŠ¨æ€è§£æä¸º backup1 ç«¯ç‚¹çš„å¯†é’¥

  # å¤‡ç”¨ç»„çš„ç¬¬ä¸‰ä¸ªç«¯ç‚¹ - ä½¿ç”¨è‡ªå®šä¹‰å¯†é’¥è¦†ç›–ç»„é»˜è®¤å€¼
  - name: "backup3"
    url: "https://api.backup3.com"
    priority: 3                            # ç»„å†…ä¼˜å…ˆçº§ 3
    timeout: "300s"
    token: "sk-custom-override-key"        # ğŸ”‘ è¦†ç›–ç»„é»˜è®¤å¯†é’¥ï¼Œåªæœ‰è¿™ä¸ªç«¯ç‚¹ä½¿ç”¨æ­¤å¯†é’¥
    # ğŸ”„ group å’Œ group-priority ä»ç„¶ç»§æ‰¿è‡ª backup ç»„
    # ğŸ”‘ api-key ä»ç„¶ä½¿ç”¨ç»„é»˜è®¤å€¼ (backup1 çš„ api-key)

  # ============ æœ¬åœ°ç»„ (local) ============
  # æœ¬åœ°æœåŠ¡ç»„ - é€šå¸¸ä¸éœ€è¦å¯†é’¥
  - name: "local"
    url: "http://localhost:11434"
    group: "local"                         # æœ¬åœ°ç»„
    group-priority: 3                      # æœ€ä½ç»„ä¼˜å…ˆçº§
    priority: 1                            # ç»„å†…ä¼˜å…ˆçº§
    timeout: "300s"
    # ğŸ”“ æœ¬åœ°æœåŠ¡é€šå¸¸ä¸éœ€è¦ token å’Œ api-key

  # æœ¬åœ°ç»„å¤‡ç”¨ç«¯ç‚¹
  - name: "local_backup"
    url: "http://localhost:8080"
    priority: 2                            # ç»„å†…ä¼˜å…ˆçº§ 2
    timeout: "300s"
    # ğŸ”„ è‡ªåŠ¨ç»§æ‰¿: group: "local", group-priority: 3
    # ğŸ”“ æ— å¯†é’¥é…ç½®ï¼Œé€‚ç”¨äºæœ¬åœ°æœåŠ¡